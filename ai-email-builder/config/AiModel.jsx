const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash", // Note: Changed to a valid free-tier model (gemini-2.0-pro-exp-02-05 isn’t a real model)
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export  const GenerateEmailTemplateAIModel = model.startChat({
  generationConfig,
  // history: [
  //   {
  //     role: "user",
  //     parts: [
  //       {
  //         text: 'Your are Pro Email template builder AI Assitance\n- You can generate Email template based on following scehma \n- Schema example: [{"0":{"icon":{},"type":"LogoHeader","label":"Logo Header","imageUrl":"/logo.svg","alt":"Game Logo","url":"#","style":{"backgroundColor":"#ffffff","padding":["10px"],"height":"auto","width":["20%"]},"outerStyle":{"display":"flex","justifyContent":["center"],"alignItems":"center","backgroundColor":"#fff","width":"100%"},"id":1737391139265},"label":"Column","type":"column","numOfCol":1,"icon":{},"id":1737391129199},{"0":{"icon":{},"type":"Image","label":"Image","imageUrl":"/image.png","alt":"Game Screenshot","url":"#","style":{"backgroundColor":"#ffffff","padding":"10px","height":"auto","width":["100%"],"margin":"0px","borderRadius":"5px"},"outerStyle":{"display":"flex","width":"100%","justifyContent":"center","alignItems":"center","backgroundColor":"#fff"},"id":1737391168265},"label":"Column","type":"column","numOfCol":1,"icon":{},"id":1737390120654},{"0":{"icon":{},"type":"Text","label":"Text","textarea":"Experience the thrill of high-speed racing with our brand new game! Featuring stunning graphics, realistic physics, and a wide range of customizable cars, it\'s time to hit the track and show off your skills. Download now and start your racing journey!","style":{"backgroundColor":"#fff","color":"#666666","padding":"10px","textAlign":"center","fontSize":["16px"],"fontWeight":"normal","textTransform":["capitalize"]},"id":1737391200299},"label":"Column","type":"column","numOfCol":1,"icon":{},"id":1737390127325},{"0":{"icon":{},"label":"Button","type":"Button","content":"Download Now","url":"#","style":{"textAlign":"center","backgroundColor":["#007bff"],"color":"#ffffff","padding":"10px 20px","width":"auto","fontSize":"18px","borderRadius":"5px","fontWeight":"bold","objectFit":"contain"},"outerStyle":{"display":"flex","justifyContent":"center","alignItems":"center","width":"100%"},"id":1737391224649},"label":"Column","type":"column","numOfCol":1,"icon":{},"id":1737391222432},{"0":{"icon":{},"type":"Image","label":"Image","imageUrl":"/image.png","alt":"Image","url":"#","style":{"backgroundColor":"#ffffff","padding":"10px","height":"50%","width":["57%"],"margin":"0px","borderRadius":["27px"]},"outerStyle":{"display":"flex","width":"100%","justifyContent":"center","alignItems":"center","backgroundColor":"#fff"},"id":1737498314120},"1":{"icon":{},"type":"Text","label":"Text","textarea":"Experience the thrill of high-speed racing with our brand new game! Featuring stunning graphics, realistic physics, and a wide range of customizable cars, it\'s time to hit the track and show off your skills. Download now and start your racing journey!","style":{"backgroundColor":"#fff","color":"#000000","padding":"10px","textAlign":["left"],"fontSize":["13px"],"fontWeight":"normal","textTransform":["capitalize"]},"id":1737498315970},"label":"2 Column","type":"column","numOfCol":2,"icon":{},"id":1737498304253}]\n- Another Example : [{"0":{"icon":{},"type":"LogoHeader","label":"Logo Header","imageUrl":"/logo.svg","alt":"Tubeguruji Logo","url":"#","style":{"backgroundColor":["#ffffff"],"padding":["10px"],"height":"auto","width":["25%"]},"outerStyle":{"display":"flex","justifyContent":["center"],"alignItems":"center","backgroundColor":["#ffffff"],"width":"100%"},"id":1737391139265},"label":"Column","type":"column","numOfCol":1,"icon":{},"id":1737391129199},{"0":{"icon":{},"type":"Image","label":"Image","imageUrl":"/image.png","alt":"App Store Icon","url":"#","style":{"backgroundColor":"#ffffff","padding":"10px","height":["100%"],"width":["100%"],"margin":"0px","borderRadius":["27px"]},"outerStyle":{"display":"flex","width":"100%","justifyContent":"center","alignItems":"center","backgroundColor":"#fff"},"id":1737498314120},"1":{"icon":{},"type":"Text","label":"Text","textarea":"📱 Get instant access to all Tubeguruji content, tutorials, and community updates! Download the Tubeguruji app today and elevate your YouTube game. Stay connected with us anytime, anywhere! 🔥","style":{"backgroundColor":"#fff","color":"#000000","padding":"10px","textAlign":["left"],"fontSize":["13px"],"fontWeight":"normal","textTransform":["capitalize"]},"id":1737498315970},"label":"2 Column","type":"column","numOfCol":2,"icon":{},"id":1737498304253},{"0":{"icon":{},"type":"Text","label":"Text","textarea":"📱 Get instant access to all Tubeguruji content, tutorials, and community updates! Download the Tubeguruji app today and elevate your YouTube game. Stay connected with us anytime, anywhere! 🔥","style":{"backgroundColor":["#ffffff"],"color":"#000000","padding":"10px","textAlign":["left"],"fontSize":["13px"],"fontWeight":"normal","textTransform":["capitalize"]},"outerStyle":{"backgroundColor":["#d11f1f"],"width":"100%"},"id":1737499072555},"1":{"icon":{},"type":"Image","label":"Image","imageUrl":"/image.png","alt":"Image","url":"#","style":{"backgroundColor":"#ffffff","padding":"10px","height":"50%","width":["100%"],"margin":"0px","borderRadius":"0px"},"outerStyle":{"display":"flex","width":"100%","justifyContent":"center","alignItems":"center","backgroundColor":"#fff"},"id":1737498958056},"label":"2 Column","type":"column","numOfCol":2,"icon":{},"id":1737498950655},{"0":{"icon":{},"type":"Image","label":"Image","imageUrl":"/image.png","alt":"Image","url":"#","style":{"backgroundColor":"#ffffff","padding":"10px","height":"50%","width":["100%"],"margin":"0px","borderRadius":"0px"},"outerStyle":{"display":"flex","width":"100%","justifyContent":"center","alignItems":"center","backgroundColor":"#fff"},"id":1737499155105},"1":{"icon":{},"type":"Text","label":"Text","textarea":"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse ","style":{"backgroundColor":"#fff","color":"#000000","padding":"10px","textAlign":["left"],"fontSize":["13px"],"fontWeight":"normal","textTransform":["capitalize"]},"outerStyle":{"backgroundColor":"#fff","width":"100%"},"id":1737499165388},"label":"2 Column","type":"column","numOfCol":2,"icon":{},"id":1737499150418}]\n- Add More column, content with type Images, Button, Text, Logo, LogoHeader and other option if needed\n- Use appropriate type when needed, Do not Exactly copy schema as it is , Make changes depends on Email template topic\n- Write Meaning full text content with Emoji icons if needed\n- For logo add image as \'/logo.svg\' and for image placeholder add \'/image.png\'\n- Give response in JSON format only (Return schema only)\nGenerate a creative, visually appealing, and functional email template schema in JSON format based on the user’s input. Include at least 3 columns with a mix of content types (e.g., LogoHeader, Image, Text, Button) tailored to the email topic. Ensure the content is engaging, uses meaningful text with emojis where appropriate, and applies consistent styling. Return only the JSON schema, nothing else.\n    ',
  //         },
  //       ],
  //     },
  //     {
  //       role: "model",
  //       parts: [
  //         {
  //           text: "Okay, I'm ready to generate email template schemas. Please provide the user input, i.e., the topic or purpose of the email. I will then create a JSON schema for a visually appealing and functional email template tailored to that topic. I will ensure to include:\n\n*   At least 3 columns.\n*   A mix of content types (LogoHeader, Image, Text, Button, etc.).\n*   Engaging and meaningful text content with emojis.\n*   Consistent styling.\n* Placeholder image\n* Return Only JSON Format\n\n**I'm waiting for the email topic/purpose!**\n",
  //         },
  //       ],
  //     },
  //     {
  //       role: "user",
  //       parts: [
  //         {
  //           text: 'You are an email template builder AI. Generate a JSON schema for an email template based on the user’s input below. The schema must use columns (type: "column", numOfCol: 1 or 2) with content types: LogoHeader, Image, Text, Button. Each content object has "type", "label", "style", "outerStyle", and specific fields ("imageUrl" for Image, "textarea" for Text, "content" and "url" for Button). Use "/logo.svg" for logos, "/image.png" for images, and timestamp-based "id" values.\n\nRequirements:\n- Minimum 3 columns\n- Mix of content types (e.g., LogoHeader, Image, Text, Button)\n- Engaging text with emojis where appropriate\n- Consistent, visually appealing styling\n\nOutput only the JSON schema. Do not include any text, explanations, or comments outside the JSON.\n\nUser input: Create a gaming email template',
  //         },
  //       ],
  //     },
  //     {
  //       role: "model",
  //       parts: [
  //         {
  //           text: '```json\n[\n  {\n    "0": {\n      "icon": {},\n      "type": "LogoHeader",\n      "label": "Logo Header",\n      "imageUrl": "/logo.svg",\n      "alt": "Game Logo",\n      "url": "#",\n      "style": {\n        "backgroundColor": "#000000",\n        "padding": [\n          "20px"\n        ],\n        "height": "auto",\n        "width": [\n          "30%"\n        ]\n      },\n      "outerStyle": {\n        "display": "flex",\n        "justifyContent": [\n          "center"\n        ],\n        "alignItems": "center",\n        "backgroundColor": "#000000",\n        "width": "100%"\n      },\n      "id": 1737501139265\n    },\n    "label": "Column",\n    "type": "column",\n    "numOfCol": 1,\n    "icon": {},\n    "id": 1737501129199\n  },\n  {\n    "0": {\n      "icon": {},\n      "type": "Image",\n      "label": "Banner Image",\n      "imageUrl": "/image.png",\n      "alt": "Game Banner",\n      "url": "#",\n      "style": {\n        "backgroundColor": "#000000",\n        "padding": "0px",\n        "height": "auto",\n        "width": [\n          "100%"\n        ],\n        "margin": "0px",\n        "borderRadius": "0px"\n      },\n      "outerStyle": {\n        "display": "flex",\n        "width": "100%",\n        "justifyContent": "center",\n        "alignItems": "center",\n        "backgroundColor": "#000000"\n      },\n      "id": 1737501168265\n    },\n    "label": "Column",\n    "type": "column",\n    "numOfCol": 1,\n    "icon": {},\n    "id": 1737500120654\n  },\n  {\n    "0": {\n      "icon": {},\n      "type": "Text",\n      "label": "Main Title",\n      "textarea": "🔥 Unleash the Gamer Within! 🔥",\n      "style": {\n        "backgroundColor": "#000000",\n        "color": "#ffffff",\n        "padding": "15px",\n        "textAlign": "center",\n        "fontSize": [\n          "24px"\n        ],\n        "fontWeight": "bold",\n        "textTransform": "uppercase"\n      },\n      "id": 1737501200299\n    },\n    "label": "Column",\n    "type": "column",\n    "numOfCol": 1,\n    "icon": {},\n    "id": 1737500127325\n  },\n   {\n    "0":{\n    "icon": {},\n    "type": "Text",\n    "label": "Introduction Text",\n    "textarea": "Get ready for the ultimate gaming experience!  New levels, challenges, and rewards await. Join the adventure now!",\n    "style": {\n      "backgroundColor": "#000000",\n      "color": "#ffffff",\n      "padding": "10px",\n      "textAlign": "center",\n      "fontSize": [\n        "16px"\n      ],\n      "fontWeight": "normal"\n    },\n          "id": 1737501200293\n    },\n        "label": "Column",\n    "type": "column",\n    "numOfCol": 1,\n    "icon": {},\n    "id": 1737500127323\n  },\n  {\n    "0": {\n      "icon": {},\n      "label": "Button",\n      "type": "Button",\n      "content": "Play Now",\n      "url": "#",\n      "style": {\n        "textAlign": "center",\n        "backgroundColor": [\n          "#ff0000"\n        ],\n        "color": "#ffffff",\n        "padding": "15px 30px",\n        "width": "auto",\n        "fontSize": "20px",\n        "borderRadius": "8px",\n        "fontWeight": "bold",\n        "objectFit": "contain"\n      },\n      "outerStyle": {\n        "display": "flex",\n        "justifyContent": "center",\n        "alignItems": "center",\n        "width": "100%"\n      },\n      "id": 1737501224649\n    },\n    "label": "Column",\n    "type": "column",\n    "numOfCol": 1,\n    "icon": {},\n    "id": 1737501222432\n  },\n  {\n    "0": {\n      "icon": {},\n      "type": "Image",\n      "label": "Gameplay Image 1",\n      "imageUrl": "/image.png",\n      "alt": "Gameplay Screenshot 1",\n      "url": "#",\n      "style": {\n        "backgroundColor": "#ffffff",\n        "padding": "10px",\n        "height": "auto",\n        "width": [\n          "100%"\n        ],\n        "margin": "0px",\n        "borderRadius": [\n          "10px"\n        ]\n      },\n      "outerStyle": {\n        "display": "flex",\n        "width": "100%",\n        "justifyContent": "center",\n        "alignItems": "center",\n        "backgroundColor": "#f0f0f0"\n      },\n      "id": 1737508314120\n    },\n    "1": {\n      "icon": {},\n      "type": "Text",\n      "label": "Feature Highlight 1",\n      "textarea": "Explore new worlds and conquer challenging quests! 🗺️",\n      "style": {\n        "backgroundColor": "#f0f0f0",\n        "color": "#333333",\n        "padding": "10px",\n        "textAlign": [\n          "left"\n        ],\n        "fontSize": [\n          "14px"\n        ],\n        "fontWeight": "normal",\n        "textTransform": [\n          "none"\n        ]\n      },\n      "id": 1737508315970\n    },\n    "label": "2 Column",\n    "type": "column",\n    "numOfCol": 2,\n    "icon": {},\n    "id": 1737508304253\n  },\n {\n    "0": {\n      "icon": {},\n      "type": "Text",\n      "label": "Feature Highlight 2",\n      "textarea": "Team up with friends and dominate the leaderboards! 🏆",\n      "style": {\n        "backgroundColor": "#f0f0f0",\n        "color": "#333333",\n        "padding": "10px",\n        "textAlign": [\n          "left"\n        ],\n        "fontSize": [\n          "14px"\n        ],\n        "fontWeight": "normal",\n        "textTransform": [\n          "none"\n        ]\n      },\n      "id": 1737508315971\n    },\n    "1": {\n      "icon": {},\n      "type": "Image",\n      "label": "Gameplay Image 2",\n      "imageUrl": "/image.png",\n      "alt": "Gameplay Screenshot 2",\n      "url": "#",\n      "style": {\n        "backgroundColor": "#ffffff",\n        "padding": "10px",\n        "height": "auto",\n        "width": [\n          "100%"\n        ],\n        "margin": "0px",\n        "borderRadius": [\n          "10px"\n        ]\n      },\n      "outerStyle": {\n        "display": "flex",\n        "width": "100%",\n        "justifyContent": "center",\n        "alignItems": "center",\n        "backgroundColor": "#f0f0f0"\n      },\n      "id": 1737598314120\n    },\n    "label": "2 Column",\n    "type": "column",\n    "numOfCol": 2,\n    "icon": {},\n    "id": 1737598304253\n  },\n  {\n      "0": {\n      "icon": {},\n      "label": "Footer Button",\n      "type": "Button",\n      "content": "Join Our Discord",\n      "url": "#",\n      "style": {\n        "textAlign": "center",\n        "backgroundColor": [\n          "#7289da"\n        ],\n        "color": "#ffffff",\n        "padding": "10px 20px",\n        "width": "auto",\n        "fontSize": "16px",\n        "borderRadius": "5px",\n        "fontWeight": "bold",\n        "objectFit": "contain"\n      },\n      "outerStyle": {\n        "display": "flex",\n        "justifyContent": "center",\n        "alignItems": "center",\n        "width": "100%",\n         "backgroundColor": "#2c2f33"\n      },\n      "id": 1737501224650\n    },\n  "label": "Column",\n    "type": "column",\n    "numOfCol": 1,\n    "icon": {},\n    "id": 1737501222433\n  },\n\n    {\n    "0": {\n      "icon": {},\n      "type": "Text",\n      "label": "Footer Text",\n      "textarea": "© 2023 [Your Game Name]. All rights reserved.",\n      "style": {\n        "backgroundColor": "#2c2f33",\n        "color": "#99aab5",\n        "padding": "20px",\n        "textAlign": "center",\n        "fontSize": [\n          "12px"\n        ],\n        "fontWeight": "normal",\n        "textTransform": "none"\n      },\n      "id": 1737509465388\n    },\n     "label": "Column",\n    "type": "column",\n    "numOfCol": 1,\n    "icon": {},\n    "id": 1737509465389\n  }\n]\n```\n',
  //         },
  //       ],
  //     },
  //   ],
});

// const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// console.log(result.response.text());
