{
  "version": 3,
  "sources": ["../../../src/cli/convexImport.ts"],
  "sourcesContent": ["import chalk from \"chalk\";\nimport { ensureHasConvexDependency } from \"./lib/utils/utils.js\";\nimport { oneoffContext } from \"../bundler/context.js\";\nimport {\n  fetchDeploymentCredentialsProvisionProd,\n  deploymentSelectionFromOptions,\n} from \"./lib/api.js\";\nimport { Command } from \"@commander-js/extra-typings\";\nimport { actionDescription } from \"./lib/command.js\";\nimport { deploymentDashboardUrlPage } from \"./dashboard.js\";\nimport { importIntoDeployment } from \"./lib/convexImport.js\";\n\nexport const convexImport = new Command(\"import\")\n  .summary(\"Import data from a file to your deployment\")\n  .description(\n    \"Import data from a file to your Convex deployment.\\n\\n\" +\n      \"  From a snapshot: `npx convex import snapshot.zip`\\n\" +\n      \"  For a single table: `npx convex import --table tableName file.json`\\n\\n\" +\n      \"By default, this imports into your dev deployment.\",\n  )\n  .allowExcessArguments(false)\n  .addImportOptions()\n  .addDeploymentSelectionOptions(actionDescription(\"Import data into\"))\n  .showHelpAfterError()\n  .action(async (filePath, options) => {\n    const ctx = oneoffContext();\n\n    await ensureHasConvexDependency(ctx, \"import\");\n\n    const deploymentSelection = deploymentSelectionFromOptions(options);\n\n    const deploymentNotice = options.prod\n      ? ` in your ${chalk.bold(\"prod\")} deployment`\n      : \"\";\n\n    const {\n      adminKey,\n      url: deploymentUrl,\n      deploymentName,\n    } = await fetchDeploymentCredentialsProvisionProd(ctx, deploymentSelection);\n\n    await importIntoDeployment(ctx, filePath, {\n      ...options,\n      deploymentUrl,\n      adminKey,\n      deploymentNotice,\n      snapshotImportDashboardLink: snapshotImportDashboardLink(deploymentName),\n    });\n  });\n\nfunction snapshotImportDashboardLink(deploymentName: string | undefined) {\n  return deploymentName === undefined\n    ? \"https://dashboard.convex.dev/deployment/settings/snapshots\"\n    : deploymentDashboardUrlPage(deploymentName, \"/settings/snapshots\");\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkB;AAClB,mBAA0C;AAC1C,qBAA8B;AAC9B,iBAGO;AACP,2BAAwB;AACxB,qBAAkC;AAClC,uBAA2C;AAC3C,0BAAqC;AAE9B,MAAM,eAAe,IAAI,6BAAQ,QAAQ,EAC7C,QAAQ,4CAA4C,EACpD;AAAA,EACC;AAIF,EACC,qBAAqB,KAAK,EAC1B,iBAAiB,EACjB,kCAA8B,kCAAkB,kBAAkB,CAAC,EACnE,mBAAmB,EACnB,OAAO,OAAO,UAAU,YAAY;AACnC,QAAM,UAAM,8BAAc;AAE1B,YAAM,wCAA0B,KAAK,QAAQ;AAE7C,QAAM,0BAAsB,2CAA+B,OAAO;AAElE,QAAM,mBAAmB,QAAQ,OAC7B,YAAY,aAAAA,QAAM,KAAK,MAAM,CAAC,gBAC9B;AAEJ,QAAM;AAAA,IACJ;AAAA,IACA,KAAK;AAAA,IACL;AAAA,EACF,IAAI,UAAM,oDAAwC,KAAK,mBAAmB;AAE1E,YAAM,0CAAqB,KAAK,UAAU;AAAA,IACxC,GAAG;AAAA,IACH;AAAA,IACA;AAAA,IACA;AAAA,IACA,6BAA6B,4BAA4B,cAAc;AAAA,EACzE,CAAC;AACH,CAAC;AAEH,SAAS,4BAA4B,gBAAoC;AACvE,SAAO,mBAAmB,SACtB,mEACA,6CAA2B,gBAAgB,qBAAqB;AACtE;",
  "names": ["chalk"]
}
